<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/client}">

<body>
    <div layout:fragment="content">
        <div th:replace="~{components/heading-main :: headingMain('Profile')}"></div>
        <div style="margin-left: 10px;">
            <div id="viewMode" class="profile-view">
                <p><strong>Name:</strong> <span th:text="${user.name}"></span></p>
                <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
                <button class="profile-btn btn-secondary" onclick="switchToEdit()">Edit</button>
                <a href="/logout">
                    <button class="profile-btn btn-reject">Logout</button>
                </a>
            </div>

            <div id="editMode" class="profile-edit" style="display:none;">
                <form action="/api/user/profile/update" method="post">
                    <label>Name</label><br>
                    <input type="text" class="profile-input" name="name" th:value="${user.name}" required><br>
                    <label>Email</label><br>
                    <input type="email" class="profile-input" name="email" th:value="${user.email}" required><br>
                    <button type="submit" class="profile-btn btn-confirm">Save</button>
                    <button type="button" class="profile-btn btn-reject"
                        onclick="switchToView()">Cancel</button>
                </form>
            </div>
        </div>
    </div>

    <div layout:fragment="scripts">
        <script>
            function switchToEdit() {
                document.getElementById("viewMode").style.display = "none";
                document.getElementById("editMode").style.display = "block";
            }

            function switchToView() {
                document.getElementById("editMode").style.display = "none";
                document.getElementById("viewMode").style.display = "block";
            }
        </script>
    </div>
</body>
</html>